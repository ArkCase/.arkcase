<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- Case File queries -->
    <bean id="caseCreatorFullNameNumberAndCurrentDateQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
        <property name="type" value="CASE_FILE" />
        <property name="jpaQuery">
            <value>
                <![CDATA[
SELECT  au.fullName,
        cf.caseNumber,
           CURRENT_DATE
FROM    CaseFile cf,
        AcmUser au
WHERE   cf.id = ?1
AND     cf.creator = au.userId
                ]]>
            </value>
        </property>
        <property name="fieldNames">
            <list>
                <value>creatorFullName</value>
                <value>caseNumber</value>
                <value>currentDate</value>
            </list>
        </property>
    </bean>

    <bean id="caseCreatorFullNameAndCurrentDateQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
        <property name="type" value="CASE_FILE" />
        <property name="jpaQuery">
            <value>
                <![CDATA[
SELECT  au.fullName,
           CURRENT_DATE
FROM    CaseFile cf,
        AcmUser au
WHERE   cf.id = ?1
AND     cf.creator = au.userId
                ]]>
            </value>
        </property>
        <property name="fieldNames">
            <list>
                <value>creatorFullName</value>
                <value>currentDate</value>
            </list>
        </property>
    </bean>


    <bean id="caseCreatorFullNameCurrentDateNumberAndTitleQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
        <property name="type" value="CASE_FILE" />
        <property name="jpaQuery">
            <value>
                <![CDATA[
SELECT  au.fullName,
           CURRENT_DATE,
        cf.caseNumber,
        cf.title
FROM    CaseFile cf,
        AcmUser au
WHERE   cf.id = ?1
AND     cf.creator = au.userId
                         ]]>
            </value>
        </property>
        <property name="fieldNames">
            <list>
                <value>creatorFullName</value>
                <value>currentDate</value>
                <value>caseNumber</value>
                <value>caseTitle</value>
            </list>
        </property>
    </bean>
    
    
    <!-- Complaint queries -->
    <bean id="complaintCreatorFullNameNumberAndCurrentDateQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
        <property name="type" value="COMPLAINT" />
        <property name="jpaQuery">
            <value>
                <![CDATA[
SELECT  au.fullName,
        cm.complaintNumber,
           CURRENT_DATE
FROM    Complaint cm,
        AcmUser au
WHERE   cm.complaintId = ?1
AND     cm.creator = au.userId
                ]]>
            </value>
        </property>
        <property name="fieldNames">
            <list>
                <value>creatorFullName</value>
                <value>complaintNumber</value>
                <value>currentDate</value>
            </list>
        </property>
    </bean>

    <bean id="complaintCreatorFullNameAndCurrentDateQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
        <property name="type" value="COMPLAINT" />
        <property name="jpaQuery">
            <value>
                <![CDATA[
SELECT  au.fullName,
           CURRENT_DATE
FROM    Complaint cm,
        AcmUser au
WHERE   cm.complaintId = ?1
AND     cm.creator = au.userId
                ]]>
            </value>
        </property>
        <property name="fieldNames">
            <list>
                <value>creatorFullName</value>
                <value>currentDate</value>
            </list>
        </property>
    </bean>

    <bean id="complaintCreatorFullNameCurrentDateNumberAndTitleQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
        <property name="type" value="COMPLAINT" />
        <property name="jpaQuery">
            <value>
                <![CDATA[
SELECT  au.fullName,
           CURRENT_DATE,
        cm.complaintNumber,
        cm.complaintTitle
FROM    Complaint cm,
        AcmUser au
WHERE   cm.complaintId = ?1
AND     cm.creator = au.userId
                         ]]>
            </value>
        </property>
        <property name="fieldNames">
            <list>
                <value>creatorFullName</value>
                <value>currentDate</value>
                <value>complaintNumber</value>
                <value>complaintTitle</value>
            </list>
        </property>
    </bean>

    <bean id="correspondenceDOJDemoQuery" class="com.armedia.acm.correspondence.model.CorrespondenceQuery">
            <property name="type" value="CASE_FILE" />
            <property name="jpaQuery">
                <value>
                    <![CDATA[
     SELECT cf.caseNumber,
            cf.title,
            CURRENT_DATE,
            TRIM(CONCAT(
              COALESCE(p.givenName, ''),
              ' ',
              CASE COALESCE(p.middleName, 'NULL') WHEN 'NULL' THEN '' ELSE CONCAT(p.middleName, ' ') END,
              COALESCE(p.familyName, '')
            )),
            TRIM(',' FROM CONCAT(
              COALESCE(addr.streetAddress, ''),
              CASE COALESCE(addr.streetAddress2, 'NULL') WHEN 'NULL' THEN '' ELSE CONCAT(', ', addr.streetAddress2) END,
              CASE COALESCE(addr.city, 'NULL') WHEN 'NULL' THEN '' ELSE CONCAT(', ', addr.city) END,
              CASE COALESCE(addr.state, 'NULL') WHEN 'NULL' THEN '' ELSE CONCAT(', ', addr.state) END,
              CASE COALESCE(addr.zip, 'NULL') WHEN 'NULL' THEN '' ELSE CONCAT(' ', addr.zip) END,
              CASE COALESCE(addr.country, 'NULL') WHEN 'NULL' THEN '' ELSE CONCAT('  ', addr.country) END
            )),
            'Ian Investigator'
     FROM   FOIARequest cf,
            AcmUser au,
            cf.personAssociations pa,
            pa.person p,
            pa.person.addresses addr
     WHERE   cf.id = ?1
     AND     pa.personType = "Requester"
                     ]]>
                 </value>
             </property>
             <property name="fieldNames">
                 <list>
                     <value>REQUEST ID</value>
                     <value>TOPIC</value>
                     <value>DATE</value>
                     <value>REQUESTER NAME</value>
                     <value>REQUESTER ADDRESS</value>
                     <value>USER</value>
                 </list>
             </property>
 </bean>
 
</beans>
